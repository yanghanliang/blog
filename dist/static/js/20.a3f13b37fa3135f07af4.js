webpackJsonp([20],{"+sF8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("Xxa5"),n=i.n(r),a=i("exGp"),o=i.n(a),s={name:"addJurisdiction",data:function(){var t,e,i=this;return{routingInformation:{name1:"首页",name2:"添加权限",router:"/"},form:{name:"",identification:"",pid:0,distribution:0},jurisdictionList:[],rules:{name:[{validator:(t=o()(n.a.mark(function t(e,r,a){var o,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}return o={name:r},t.prev=2,t.next=5,i.$http.post("jurisdiction/verification",o);case 5:s=t.sent,s.verification?a():a(new Error("此权限名称已存在，请重新输入")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:t.next=16;break;case 15:a(new Error("请输入权限名称"));case 16:case"end":return t.stop()}},t,i,[[2,10]])})),function(e,i,r){return t.apply(this,arguments)}),trigger:"change"}],identification:[{validator:(e=o()(n.a.mark(function t(e,r,a){var o,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}return o={identification:r},t.prev=2,t.next=5,i.$http.post("jurisdiction/verification",o);case 5:s=t.sent,s.verification?a():a(new Error("此权限标识已存在，请重新输入")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:t.next=16;break;case 15:a(new Error("请输入权限标识"));case 16:case"end":return t.stop()}},t,i,[[2,10]])})),function(t,i,r){return e.apply(this,arguments)}),trigger:"change"}]},id:this.$route.params.id}},created:function(){this.getJurisdictionList(),this.id&&this.getJurisdictionDetails()},methods:{getJurisdictionList:function(){var t=this;return o()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("jurisdiction/list");case 3:i=e.sent,t.jurisdictionList=[{j_name:"最高级别",id:0}].concat(i),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},onSubmit:function(){var t=this;return o()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Global.verification(t,"form");case 2:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:i={name:t.form.name,identification:t.form.identification,pid:t.form.pid,distribution:t.form.distribution};try{t.$http.post("jurisdiction/add",i),t.$message.success("添加成功"),t.Global.getNotJurisdiction(t),t.$router.push({name:"jurisdictionList"})}catch(t){console.log(t)}case 7:case"end":return e.stop()}},e,t)}))()},getJurisdictionDetails:function(){var t=this;return o()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("jurisdiction/details/"+t.id);case 3:i=e.sent,t.form.name=i.j_name,t.form.identification=i.identification,t.form.pid=i.id,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_right form-box"},[i("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入权限名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"权限标识",prop:"identification"}},[i("el-input",{attrs:{placeholder:"请输入权限标识"},model:{value:t.form.identification,callback:function(e){t.$set(t.form,"identification",e)},expression:"form.identification"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分布"}},[i("el-radio-group",{model:{value:t.form.distribution,callback:function(e){t.$set(t.form,"distribution",e)},expression:"form.distribution"}},[i("el-radio",{attrs:{label:0}},[t._v("api")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("view")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"所属级别"}},[i("el-select",{attrs:{placeholder:"请选择所属级别"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},[t._l(t.jurisdictionList,function(t){return[i("el-option",{key:t.id,attrs:{label:t.j_name,value:t.id}})]})],2)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),t._v(" "),i("el-button",[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(s,c,!1,function(t){i("f24V")},"data-v-f4ce979a",null);e.default=u.exports},f24V:function(t,e){}});