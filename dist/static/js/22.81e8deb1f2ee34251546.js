webpackJsonp([22],{gbWU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),o=a("exGp"),n=a.n(o),i={data:function(){return{tableData:[],dialogVisible:!1,row:{},sortData:{sortField:"classname",orderBy:"descending",pageSize:10,currentNumber:0,currentPage:1,searchData:""},total:0}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;return n()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.post("category",t.sortData);case 3:a=e.sent,t.tableData=a.list,t.total=a.total,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},showDialog:function(t){this.dialogVisible=!0,this.row=t},deleteCategory:function(){var t=this;return n()(s.a.mark(function e(){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dialogVisible=!1,e.next=3,t.$http.delete("deleteCategory/"+t.row.id);case 3:if(200===(a=e.sent).status){for(r=0;r<t.tableData.length;r++)t.tableData[r].id===t.row.id&&t.tableData.splice(r,1);t.$message({type:"success",message:a.msg})}else t.$message({type:"error",message:a.msg});case 5:case"end":return e.stop()}},e,t)}))()},sortChange:function(t){var e=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.sortData.sortField===t.prop&&e.sortData.orderBy===t.order||(e.sortData.sortField=t.prop,e.sortData.orderBy=t.order,e.loadData());case 1:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(t){this.sortData.pageSize=t,this.loadData()},clickPage:function(t){this.sortData.currentPage=t,this.loadData()},searchFn:function(){this.sortData.currentPage=1,this.loadData()}},watch:{$route:function(t,e){this.loadData()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_right"},[a("el-table",{attrs:{height:"600",data:t.tableData,border:"","default-sort":{prop:t.sortData.sortField,order:t.sortData.orderBy}},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"classname",label:"类名"}}),t._v(" "),a("el-table-column",{attrs:{label:"层级"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[0===r.pid?a("span",[t._v("一级")]):a("span",[t._v(t._s(r.pid_classname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{clearable:"",size:"mini",placeholder:"输入类名搜索"},on:{input:t.searchFn},model:{value:t.sortData.searchData,callback:function(e){t.$set(t.sortData,"searchData",e)},expression:"sortData.searchData"}})]}},{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.showDialog(r)}}},[t._v("删除")]),t._v(" "),a("router-link",{staticClass:"edit",attrs:{to:"/admin/editCategory/"+r.id}},[t._v("编辑")])]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"mt20 ta-right",attrs:{"current-page":t.sortData.currentPage,"page-sizes":t.pageSizes,"page-size":t.sortData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.clickPage}}),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("是否删除“ "+t._s(t.row.classname)+"” 这个分类?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteCategory}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(i,l,!1,function(t){a("oKV3")},"data-v-c0c902ae",null);e.default=c.exports},oKV3:function(t,e){}});